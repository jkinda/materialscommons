
<div ng-controller="DataGroupController">

    <br></br>
    <h4>Pick the date range to view the data/datagroups</h4>
    <br> </br>
    <table>
        <tr>

            <b>From  </b> <input type="text" class="datepicker" datepicker="" ng-model="myDate">
            <b>To   </b> <input type="text" class="datepicker" datepicker="" ng-model="endDate">

            <b>Select Type</b>
                <select ng-model="type" class="selectpicker" id="type">
                    <option></option>
                    <option value="datagroup">DataGroup</option>
                    <option value="data">Data</option>
                </select>

                <button class="btn btn-small btn-primary" type="button" ng-click="search_by_date()" >Search</button>
        </tr>
    </table>
     <br>

    <div ng-show="search_results.data.rows.length > 0">
        <h4> Search results by {{type}}</h4>  <br></br>
        <table class="table">
            <tr>
                <th>Data</th>
                <th>Type</th>
                <th>Created At</th>
                <th>DataGroup</th>
                <th>Created By</th>

            </tr>

            <tr ng-repeat="row in search_results.data.rows | matchDates: [myDate, endDate, type] | private">
                <td>{{row.value.name}}</td>
                <td>{{row.value.type}}</td>
                <td>{{get_utc_obj(row.value.dateAdded).toDateString()}}</td>
                <td>
                    <div ng-switch on="row.value.type">
                        <div ng-switch-when="data">
                            <ul ng-repeat="each_parent_id in row.value.dataGroups">
                                <div ng-init="data_item=getData(each_parent_id)">
                                    <pre>popover: {{each_parent_id}}</pre>
                                    <button type="button" class="btn" data-unique="1" data-placement="right" data-title="DataGroup Report" bs-popover="'partials/datagroups/display_parent.html'" data-hide="each_parent_id">{{data_item.name}}</button>

                                </div>
                            </ul>
                        </div>
                        <div ng-switch-when="datagroup">
                            <ul ng-repeat="each_parent_id in row.value.parentDataGroups">
                                <div ng-init="data_item=getData(each_parent_id)">
                                    <button type="button" class="btn" data-unique="1" data-placement="right" data-title="DataGroup Report" bs-popover="'partials/datagroups/display_parent.html'" data-hide="each_parent_id">{{data_item.name}}</button>
                                </div>
                            </ul>
                        </div>
                    </div>
                </td>
                <td>
                    <div ng-switch on="row.value.type">
                        <div ng-switch-when="data">
                            Owner: {{row.value.owner}}
                        </div>
                        <div ng-switch-when="datagroup">
                            User: {{row.value.users[0]}}
                        </div>
                    </div>

                </td>
            </tr>
        </table>

    </div>




</div>

        <div></div>





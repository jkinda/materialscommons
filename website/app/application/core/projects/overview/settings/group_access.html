<div ng-controller="projectsOverviewGroupAccess">
    <div class="row">
        <label>New UserGroup</label>

        <div class="panel panel-default">
            <div class="panel panel-body">
                <div class="col-lg-8">
                    <form class="form-horizontal">
                        <cgroup label="Name:">
                            <input class="form-control" ng-model="newgroup.name" placeholder="Name...">
                        </cgroup>
                        <cgroup label="Access:">
                            <select class="form-control" ng-model="newgroup.access">
                                <option value="private">Private</option>
                                <option value="public">Public</option>
                            </select>
                        </cgroup>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Select the Project:</label>
                            <div class="col-sm-4">
                                <select class="form-control" ng-model="model.selected_project"
                                        ng-options="pr.name for pr in projects">
                                </select>
                            </div>
                            <button class="btn btn-default btn-default" ng-click="populateProjects()">Add Project</button>
                        </div>

                        <cgroup label="Description:">
                            <textarea class="form-control" placeholder="Description..."
                                      ng-model="newgroup.description"></textarea>
                        </cgroup>
                        <cgroup>
                            <button class="btn btn-default btn-primary" ng-click="createUserGroup()">Save</button>
                        </cgroup>
                    </form>
                </div>
                <div ng-show="newgroup.projects.length!==0" class="col-lg-4">
                    <label>Added Projects:  </label>
                    <ul class="list-group" >
                        <li ng-repeat="ug in newgroup.projects" class="list-group-item"><span style="float:right">
                            <button class="btn btn-default btn-danger" ng-click="removeProjects($index)"> Remove</button>
                        </span><a ng-click="groupDetails(ug.id)">{{ug.name}}</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <label>Usergroups:  </label><span style="float: right">(Num of users)</span>
            <ul class="list-group">
                <li  ng-repeat="ug in groups" class="list-group-item"><span class="badge">{{ug.users.length}}</span><a ng-click="groupDetails(ug.id)">{{ug.name}}</a></li>
            </ul>
        </div>
        <div ng-hide="selected_ug==''" class="col-lg-8">
            <label> More Information :{{selected_ug.name}} </label>

            <div class="panel panel-default">
                <div class="panel panel-body">
                    <label>Users:</label>
                    <table class="table table-striped">
                        <tbody>
                        <tr ng-repeat="i in selected_ug.users">
                            <td ng-if="selected_ug.owner!==i">{{i}}</td>
                            <td ng-if="selected_ug.owner===i">{{i}}   - <u>Owner</u></td>
                            <td ng-show="selected_ug.owner==signed_in_user" style="float:right">
                                <button class="btn btn-default btn-danger"
                                        ng-click="deleteUser($index)">
                                    Delete
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="row" ng-show="selected_ug.owner==signed_in_user">
                        <div class="form-group">
                            <div class="col-lg-6">
                                <select class="form-control" ng-model="bk.user_name">
                                    <option></option>
                                    <option ng-repeat="user in all_users | orderBy:'email'">{{ user.email }}</option>
                                </select>
                            </div>
                            <button class="btn btn-info" ng-click="addUser()">Add</button>
                        </div>
                    </div>
                    <hr style="border: 0.2px solid lightgray">

                    <label>Projects:</label>

                    <table class="table table-striped">
                        <tbody>
                        <tr ng-repeat="i in selected_ug.projects">
                            <td ng-if="i.id===project_id">{{i.name}} - <u>Current</u></td>
                            <td ng-if="i.id!==project_id">{{i.name}}</td>
                            <td ng-show="selected_ug.owner==signed_in_user" style="float:right">
                                <button class="btn btn-default btn-danger"
                                        ng-click="deleteProject($index)">
                                    Delete
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="row" ng-show="selected_ug.owner==signed_in_user">
                        <div class="form-group">
                            <div class="col-lg-6">
                                <select class="form-control" ng-model="bk.selected_project"
                                        ng-options="pr.name for pr in projects">
                                </select>
                            </div>
                            <button class="btn btn-info" ng-click="addProject()">Add</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
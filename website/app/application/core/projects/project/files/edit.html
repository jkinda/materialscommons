<div class="row">
    <div class="col-xs-12 card card-right">
        <ul class="list-inline no-bottom-margin">
            <li>
                <h2 class="file-color" ng-if="!ctrl.renameActive">{{ctrl.file.name}}</h2>
                <span ng-if="ctrl.renameActive">
                    <input type="text" class="section-as-margin" ng-model="ctrl.newName" on-enter="ctrl.renameFile()">
                    <button class="btn btn-files" ng-click="ctrl.renameFile()">Done</button>
                    <button class="btn btn-danger" ng-click="ctrl.newName = ''; ctrl.renameActive = false">Cancel
                    </button>
                </span>
            </li>
            <li ng-if="!ctrl.renameActive">
                <a ng-click="ctrl.renameActive = !ctrl.renameActive" class="heading-label text-uppercase">rename</a>
            </li>
            <li ng-if="!ctrl.renameActive">
                <a ng-href="{{ctrl.downloadSrc()}}"
                   class="heading-label text-uppercase"
                   download="{{ctrl.file.name}}">
                    download
                </a>
            </li>
            <li ng-if="!ctrl.renameActive">
                <a ng-click="ctrl.deleteFile()" class="heading-label text-uppercase text-danger">delete</a>
            </li>
        </ul>
        <ul class="list-inline text-muted no-bottom-margin">
            <li>Type: {{ctrl.file.mediatype.mime}}</li>
            <li>Owner: {{ctrl.file.owner}}</li>
            <li>Created: {{ctrl.file.birthtime | toDateString}}</li>
            <li>Size: {{ctrl.file.size | bytes}}</li>
        </ul>

        <div class="row">
            <h4 class="text-uppercase section">description</h4>

            <p>{{ctrl.file.description}}</p>
        </div>

        <div class="row">
            <div class="section">
                <display-file-contents file="ctrl.file"></display-file-contents>
            </div>
        </div>

        <div class="row">
            <h4 class="text-uppercase section">tags</h4>
            <tags-input on-tag-added="ctrl.updateTags()" display-property="tag_id"
                        on-tag-removed="ctrl.updateTags()" ng-model="ctrl.file.tags"
                        placeholder="Add a Tag" replace-spaces-with-dashes="false">
            </tags-input>
        </div>

        <div ng-if="true" class="row">
            <ul class="list-inline no-bottom-margin">
                <li><h4 class="text-uppercase section">notes</h4></li>
                <li ng-if="!ctrl.addNoteActive">
                    <a ng-click="ctrl.addNoteActive = true" class="text-small text-uppercase">
                        <i class="fa fa-fw fa-plus"></i>add note
                    </a>
                </li>
            </ul>

            <div ng-if="ctrl.addNoteActive">
                <div class="row">
                    <create-note note="ctrl.newNote"
                                 save="ctrl.saveNote(note)"
                                 cancel="ctrl.cancelNote()">
                    </create-note>
                </div>
            </div>
            <div ng-if="!ctrl.addNoteActive" ng-repeat="note in ctrl.file.notes" class="row">
                    <span class="pull-right">
                            <a ng-click="note.edit = !note.edit"><i class="fa fa-fw fa-edit"></i></a></span>

                <div class="row" ng-if="!note.edit">
                    <div class="col-xs-8">Title: {{note.title}}</div>
                    <hr>
                    <div class="col-xs-11" ta-bind ng-model="note.note"></div>
                </div>
                <div class="row" ng-if="note.edit">
                    <create-note note="note"
                                 save="ctrl.saveNote(note)"
                                 cancel="ctrl.cancelNote()">
                    </create-note>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-controller="toolbarMachines">
    <div class="row-fluid">
        <div class="span7">
            <h4>Machine:</h4>
            <ul class="muted">
                <b>Instructions:</b>
                <li> table below provides list of various machines in the database.</li>
                <li> If you would like to create a new one then click the button "Create New Machine" and fill out the
                    form.
                </li>
                <li> Usage: machines will be available as a drop-down list while creating provenance.</li>
            </ul>
        </div>
    </div>

    <div class="row-fluid">
        <h4>List of available machines: </h4>
        <paged data="machines_list" current-page="currentDataPage" page-size="5">

            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Machine</th>
                    <th>Contact</th>
                    <th>Date</th>
                    <th>Notes</th>
                    <th>Additional properties</th>
                </tr>
                </thead>
                <tbody>
                <p ng-if="machines_list.length==0">
                    <b>No available machines in the database</b>
                </p>

                <p ng-if="machines_list.length!=0">
                    <tr ng-repeat="machine in machines_list | orderBy:predicate:reverse | page:currentDataPage:5">
                        <td>{{machine.name}}</td>
                        <td>{{machine.contact_email}}</td>
                        <td>{{machine.birthtime | toDateString}}</td>
                        <td ng-if="machine.notes.length==0">
                            {{}}
                        </td>
                        <td ng-if="machine.notes.length!=0">
                            {{machine.notes}}

                        </td>
                        <td>
                            <ul ng-repeat="kv in machine.model">
                                <li>{{kv.name}} - {{kv.value}}</li>
                            </ul>
                        </td>


                    </tr>
                </p>

                </tbody>
            </table>
        </paged>
    </div>
    <br>
    <button class="btn btn-primary" ng-click="showForm=!showForm">Create New Machine</button>
    <div ng-show="mach">
        <b>Machine {{mach.name}} has been created</b>

    </div>
    <br>

    <div class="row-fluid">
        <div ng-show="showForm" class="span6">
            <div class="well">

                <form class="form-horizontal">
                    <div class="control-group">
                        <label class="control-label">Name:</label>

                        <div class="controls"><input ng-model="machine.name" placeholder="Name your machine"
                                                     type="text"></div>


                    </div>
                    <div class="control-group">
                        <label class="control-label">Contact:</label>

                        <div class="controls"><input ng-model="machine.contact_email" placeholder="contact .."
                                                     type="text"></div>


                    </div>
                    <div class="control-group">
                        <label class="control-label">Notes:</label>

                        <div class="controls"><input ng-model="machine.notes" placeholder="Type your notes here...."
                                                     type="text"></div>


                    </div>
                    <div class="control-group">
                        <label class="control-label">Additional/Custom</label>

                        <div class="controls">
            <span ng-repeat="pv in machine.model">
            <label>{{pv.name}}:</label><span>
            <input type="text" ng-model="pv.value">
            </span>
                        </div>

                    </div>

                    <div class="control-group">
                        <label class="control-label">Additional Properties:</label>

                        <div class="controls">
                            <select ng-model="p_name">
                                <option ng-repeat="each in machine_template.model" value="{{each.name}}">
                                    {{each.name}}
                                </option>
                            </select>
                            <button ng-click="add_property_to_machine()">add</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Add Custom Properties:</label>

                        <div class="controls">
                            <input ng-model="additional_prop" placeholder="type property name ....."
                                   type="text">
                            <button ng-click="custom_property()">add</button>
                        </div>
                    </div>

                    <button ng-disabled="!machine.name" ng-click="save()">Save Machine</button>
                    <button ng-click="clear_machine()">clear</button>

                </form>
            </div>
        </div>
    </div>
</div>
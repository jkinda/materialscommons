<div ng-controller="toolbarMaterials">
    <div class="row-fluid">
        <div class="span7">
            <h4>Material:</h4>
            <ul class="muted">
                <li> table below provides list of various materials in the database.</li>
                <li> If you would like to create a new one then click the button "Create New Material" and fill out the
                    form.
                </li>
                <li>Usage: materials will be available as a drop-down list while creating provenance.</li>
            </ul>
        </div>
    </div>

    <div class="row-fluid">
        <h4>List of available materials: </h4>
        <paged data="materials_list" current-page="currentDataPage" page-size="20">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Alloy</th>
                    <th>Date Created</th>
                    <th>Treatments</th>
                </tr>
                </thead>
                <tbody>
                <p ng-if="materials_list.length==0">
                    <b>No available materials in the database</b>
                </p>

                <p ng-if="materials_list.length!=0">
                    <tr ng-repeat="material in materials_list | orderBy:predicate:reverse | page:currentDataPage:20">
                        <td>{{material.name}}</td>
                        <td>{{material.alloy}}</td>

                        <td>{{material.birthtime | toDateString}}</td>

                        <td>
                            <ul ng-repeat="tr in material.treatments_order">
                                <li>{{tr}}</li>
                            </ul>
                        </td>
                    </tr>
                </p>
                </tbody>
            </table>
        </paged>
    </div>

    <form name="Material" class="form-horizontal">
        <legend>Create New Material</legend>
        <div class="span12">
            <fieldset>
                <div class="control-group">
                    <label class='control-label'>Name : <i class="fa fa-asterisk" style="color: red"></i> </label>

                    <div class='control-group'>
                        <input ng-model="doc.name" type="text" placeholder='name...' required>
                    </div>
                    <label class='control-label'>Alloy : <i class="fa fa-asterisk" style="color: red"></i> </label>

                    <div class='control-group'>
                        <input ng-model="doc.alloy" type="text" placeholder='alloy...' required>
                    </div>
                    <label class='control-label'>Notes : </label>

                    <div class='control-group'>
                        <textarea class="field span4" rows="6" placeholder="Enter a short synopsis..."
                                  ng-model="doc.notes"></textarea>
                    </div>
                    <label class='control-label'>Treatments : </label>

                    <div class='control-group'>
                        <select ng-model="model.selected_treatment"
                                ng-options="treat.template_name for treat in templates"
                                ng-change="showForm()">
                        </select>
                    </div>
                    <label class='control-label'><strong>{{model.selected_treatment.template_name || model.tab_item}} </strong></label>
                    <div class='control-group'>
                        <div class="span10">
                            <div class="span6">
                                <div ng-show="model.selected_treatment!==''">
                                    <div class="well">
                                        <div df-properties default-properties="default_properties"></div>
                                        <button ng-click="addTreatment()" class="btn btn-primary">Add</button>
                                    </div>
                                </div>
                            </div>
                            <div class="span2">
                                <label>Treatments Order:</label>
                                <div class="tabbable tabs-right">
                                    <ul class="nav nav-tabs" ng-repeat="each_item in doc.treatments_order">
                                        <li><a ng-click="showTab(each_item)"
                                               data-toggle="tab"><strong>{{each_item}}</strong></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
        <button ng-click="save(Material)" class="btn btn-primary">Create Material</button>
    </form>

</div>

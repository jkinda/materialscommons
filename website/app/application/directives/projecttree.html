<div ng-show="treeOverview || treeActive">
    <div class="row">
        <a ng-click="backToFolder(trailitem)" ng-repeat="trailitem in trail">
            <i class="fa fa-folder trailspace"/><span>{{trailitem.displayname}} / </span>
        </a><br>
    </div>
    <div>
        <div class="panel panel-default">
            <div ng-hide="checkBox" class="panel-heading file-heading" ng-style="{'background-color': color}">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="col-lg-6">
                            <span>Last update:...</span>
                        </div>
                        <div class="col-lg-2 col-lg-offset-4">
                            <a action-stack
                               ng-click="toggleStackAction('provenance', 'overview-action-stack')"
                               class="action-link"
                               style="color:white; font-style: bold">
                                14,355 Files/10Gb
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Comment out because this will be added back in short term -->
                <!-- <a style="padding-right: 15px;color: black" class="pull-right"><i style="padding-right: 2px;" class="fa fa-bar-chart-o"></i>Compare </a>
                <a style="padding-right: 15px;color: black" class="pull-right"><i  style="padding-right: 2px;" class="fa fa-download"></i>Download </a>
                <a style="padding-right: 15px;color: black" class="pull-right"><i  style="padding-right: 2px;" class="fa fa-upload"></i>Upload </a> -->

            </div>
            <!-- <div class="panel-body" style="padding: 5px;background-color: #389DC1">
            <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
            View by <span class="caret"/>
            </button>
            <ul class="dropdown-menu" role="menu">
            <li><i class="fa fa-folder-open"> Directories</i></li>
            <li><i class="fa fa-suitecase"> Dataset abc</i></li>
            <li><i class="fa fa-suitecase"> Dataset def</i></li>
            </ul>
            </div>
            </div> -->
        </div>
    </div>
    <div ng-show="loaded===false">
        <div class="row col-lg-offset-5">
            <p><i class="fa fa-spinner fa-spin fa-4x"></i> Loading...</p>
        </div>
    </div>
    <div ng-show="loaded===true">
        <table class="table  table-file-directory ">
            <tbody>
                <tr ng-repeat="entry in dir|orderBy:'displayname'" data-tt-id="{{t.c_id}}"
                    data-tt-parent-id="{{t.parent_id}}"
                    data-drop="true" data-jqyoui-options ng-model="list2" jqyoui-droppable>
                    <td ng-show="checkBox" ng-if="entry.type=='datafile'">
                        <input ng-model="entry.selected" ng-click="fileSelected(entry)"
                               ng-change="entry.selected = !entry.selected" type="checkbox">
                        <div class="btn-group project-tree-menu">
                            <a data-toggle="dropdown"><i class="fa fa-plus"></i> <span class="caret"/></a>
                            <ul class="dropdown-menu" role="menu">
                                <li class="dropdown-submenu">
                                    <a href="#">Add Tag</a>
                                    <ul class="dropdown-menu scrollable-menu">
                                        <li ng-repeat="t in user_tags">
                                            <span><i class="fa" ng-class="'fa-' + t.icon" style="color: {{t.color}}"></i><a
                                                ng-click="addTag(entry, t)" role="menuItem">{{t.name}}</a></span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <a ng-click="populatePath(entry)">
                            <i class="fa fa-file space-right"/>{{entry.displayname}}
                            <i ng-class="{'fa fa-close action-link-close': actionActive('file', entry.id)}"/>
                        </a>
                    </td>
                    <td ng-if="entry.type=='datadir'">
                        <div class="btn-group project-tree-menu">
                            <a data-toggle="dropdown"><i class="fa fa-plus"></i> <span class="caret"/></a>
                            <ul class="dropdown-menu" role="menu">
                                <li class="dropdown-submenu">
                                    <a href="#">Add Tag</a>
                                    <ul class="dropdown-menu scrollable-menu">
                                        <li ng-repeat="t in user_tags">
                                            <span><i class="fa" ng-class="'fa-' + t.icon" style="color: {{t.color}}"></i>
                                                <a ng-click="addTag(entry, t)" role="menuItem">{{t.name}}</a>
                                            </span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <a ng-click="openFolder(entry)"><i class="fa fa-folder space-right"/>{{entry.displayname}}</a>
                    </td>
                    <td ng-show="!checkBox" ng-if="entry.type=='datafile'">
                        <span ng-if="actionActive('review')">
                            <input ng-model="entry.selected" ng-click="fileSelected(entry)"
                                   ng-change="entry.selected = !entry.selected" type="checkbox">
                        </span>

                        <div class="btn-group project-tree-menu">
                            <a data-toggle="dropdown"><i class="fa fa-plus"></i> <span class="caret"/></a>
                            <ul class="dropdown-menu" role="menu">
                                <li class="dropdown-submenu">
                                    <a href="#">Add Tagg</a>
                                    <ul class="dropdown-menu scrollable-menu">
                                        <li ng-repeat="t in user_tags">
                                           <a ng-click="addTag(entry, t)" role="menuItem"><i class="fa" ng-class="'fa-' + t.icon" style="color: {{t.color}}"></i>{{t.name}}</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#">Add to existing review</a>
                                    <ul class="dropdown-menu scrollable-menu">
                                        <li ng-repeat="r in open_reviews">
                                            <a style="padding-left: 8px;" ng-click="addToReview(entry, r)" role="menuItem">{{r.title}}</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <a ng-click="populatePath(entry)">
                            <i class="fa fa-file space-right"/>{{entry.displayname}}
                            <i ng-class="{'fa fa-close action-link-close': actionActive('file', entry.id)}"/>
                        </a>
                    </td>
                    <td ng-if="entry.type=='datafile'">{{entry.size}}</td>
                    <td ng-if="entry.type=='datadir'">-</td>
                    <td>{{entry.owner}}</td>
                    <td ng-show="entry.tags != {}" class="tag-width" ng-repeat="t in entry.tags[user]">
                      <i tooltip="{{t.name}}" class="fa" ng-class="'fa-' + t.icon" ng-style="{color: t.color}"></i>
                    </td>
                    <td ng-show="entry.tags == {}"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div ui-view=''></div>
    <div class="modal fade" id="addReview" tabindex="-1" role="dialog" aria-labelledby="reviewsLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="reviewsLabel">Request Review for file : <u>{{dfitem.name}}</u> </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal">
                        <div class="input-group col-lg-10">
                            <label class="control-label" for="Title">Title: <i class="fa fa-asterisk" style="color: red"/></label>

                            <div class="controls">
                                <input class="form-control input-lg" id="Title" name="Title" placeholder="Title..."
                                       required="" type="text" ng-model="model.title">
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Comment: <i class="fa fa-asterisk" style="color: red"/></label>
                            <div class="controls">
                                <text-angular ta-toolbar="[['h1','h2','h3', 'h4', 'h5', 'h6','p', 'quote'],
                                          ['bold','italics','underline','ul','ol'],['undo', 'redo','clear'],
                                          ['justifyLeft','justifyCenter','justifyRight'], ['insertLink', 'insertImage']]"
                                              ng-model="model.new_review">
                                </text-angular>
                            </div>
                        </div>
                        <div class="input-group col-lg-5">
                            <label class="control-label" for="selectbasic">
                                Assign To: <i class="fa fa-asterisk" style="color: red"/>
                            </label>
                            <div class="controls">
                                    <select class="form-control" ng-model="model.assigned_to"
                                            required="">
                                        <option disabled>-- Assign to --</option>
                                        <option ng-repeat="user in users">{{ user }}</option>
                                    </select>
                            </div>
                        </div>  <br>
                        <div class="control-group">
                            <div class="controls">
                                <button ng-click="addReview()" class="btn btn-primary" data-dismiss="modal">Submit Review</button>
                            </div>
                        </div>
                </form>
            </div>
        </div>
    </div>
</div>
</div>

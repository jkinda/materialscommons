<cgroup label="Name:">
    <input class="form-control" ng-model="doc.name" placeholder="Name..." ng-disabled="edit" type="text">
</cgroup>
<cgroup label="Description:">
    <textarea class="form-control" placeholder="Description..." ng-model="doc.description"
              ng-disabled="edit"></textarea>
</cgroup>
<div ng-if="edit===true">
    <div ng-show="doc.notes.length > 0">
        <h4>Previous notes:</h4>

        <div class="row" ng-repeat="n in doc.notes | orderBy: date">
            <div ng-if="edit_index==$index">
                <text-angular ta-toolbar="[['h1','h2','h3', 'h4', 'h5', 'h6','p', 'quote'],
        ['bold','italics','underline','ul','ol'],['undo', 'redo','clear'],
        ['justifyLeft','justifyCenter','justifyRight'], ['insertLink', 'insertImage']]"
                              ng-model="n.message"></text-angular>
                <br>
                <button ng-click="saveNotes($index)" class="btn btn-default btn-primary">Save</button>
            </div>
            <div ng-if="edit_index!==$index">
                <div ta-bind ng-model="n.message"></div>
            </div>
            <div style="font-size: 12px;">
                {{n.date}} --- {{n.who}}
            </div>
            <div ng-if="edit_index!==$index">
                <a ng-click="editNotes($index)">edit</a>
            </div>
            <hr/>
        </div>
    </div>
</div>

<div class="form-group">
    <label class="col-sm-2 control-label">Run Date:</label>
    <div class="row">
        <div ng-if="doc.template.template_pick=='experiment'">
            <button ng-click="custom=!custom">+</button> {{doc.experiment_run_date | date:'mediumDate'}}
            <div ng-show="custom">
                <label class="col-sm-2 control-label"></label>
                <div class="col-sm-4">
                    <datepicker ng-model="doc.experiment_run_date"></datepicker>
                </div>
            </div>
        </div>
        <div ng-if="doc.template.template_pick=='computation'">
            <button ng-click="custom=!custom">+</button> {{doc.start_run | date:'medium'}}/{{doc.stop_run | date:'medium'}}
            <div ng-show="custom">
                <label class="col-sm-2 control-label">Start Run:</label>
                <div class="col-sm-4">
                    <datepicker ng-model="bk.start_run"></datepicker>
                </div>
                <label class="col-sm-2 control-label">Stop Run:</label>
                <div class="col-sm-4">
                    <datepicker ng-model="bk.stop_run"></datepicker>
                </div>
                <label class="col-sm-2 control-label"></label>

                <div class="input-group">
                    <textarea class="form-control" placeholder="Error messages..." ng-model="bk.new_err_msg"
                              ng-disabled="edit"></textarea>
                    <button ng-click="add_run()" ng-disabled="!bk.start_run" class="btn btn-default btn-info">Add
                    </button>
                </div>

            </div>

        </div>
    </div>


</div>

<div ng-show="doc.runs.length > 0">
    <label class="col-sm-2 control-label">previous runs:</label>
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Start</th>
            <th>End</th>
            <th>Error Message</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="run in doc.runs">
            <td>{{run.started | date:'fullDate'}}</td>
            <td>{{run.stopped | date:'fullDate'}}</td>
            <td>{{run.error_messages}}
                <button type="button" class="close" ng-click="remove_run($index);">Ã—</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</div>

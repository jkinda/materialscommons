<div ng-controller="provenanceFinish">
    <div class="row-fluid">
        <form class="form-horizontal">
            <fieldset>
                <legend>Process</legend>
                <div ng-repeat="item in process.model.default_properties">
                    <cgroup label="{{item.name}}:">
                        <input class="input-xlarge" ng-model="item.value" type="text" ng-disabled="true">
                    </cgroup>
                </div>
                <cgroup label="Machine:">
                    <input class="input-xlarge" ng-model="process.machine.name" type="text" ng-disabled="true">
                </cgroup>
                <cgroup label="Notes:">
                    <div class="span6" ng-show="process.notes.length > 0">
                        <table class="table">
                            <thead>
                            <th>Message</th>
                            <th>Who</th>
                            <th>Date Created</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat="note in process.notes">
                                <td>{{note.message}}</td>
                                <td>{{note.who}}</td>
                                <td>{{note.date}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </cgroup>
                <div ng-if="process.model.added_properties.length!=0">
                    <div ng-repeat="item in process.model.added_properties">
                        <cgroup label="{{item.name}}:">
                            <input class="input-xlarge" ng-model="item.value" type="text" ng-disabled="true">
                        </cgroup>
                    </div>
                </div>

            </fieldset>
        </form>
    </div>
    <div class="row-fluid">
        <h4>Inputs</h4>
        <hr>
        <form class="form-horizontal" ng-repeat="(name, vals) in inputs">
            <fieldset>
                <legend>{{ name }}</legend>
                <div ng-if="name=='Pick Sample'">
                    <div sample-view doc="vals" ng-disabled="true"></div>
                </div>
                <div ng-if="name!=='Pick Sample'">
                    <div ng-repeat="value in vals.model.default">
                        <cgroup ng-if="value.value !== ''" label="{{value.name}}">
                            <input class="input-xlarge" ng-model="value.value" type="text" ng-disabled="true">
                        </cgroup>
                    </div>
                    <div ng-repeat="value in vals.model.added_properties">
                        <cgroup ng-if="value.value !== ''" label="{{value.name}}">
                            <input class="input-xlarge" ng-model="value.value" type="text" ng-disabled="true">
                        </cgroup>
                    </div>
                </div>
            </fieldset>
        </form>
        <form ng-if="input_files.length != 0" class="form-horizontal">
            <fieldset>
                <legend>Input Files</legend>
                <cgroup ng-repeat="file in input_files" label="File:">
                    <input class="input-xlarge" ng-model="file.name" type="text" ng-disabled="true">
                </cgroup>
            </fieldset>
        </form>
    </div>
    <div class="row-fluid">
        <h4>Outputs</h4>
        <hr>
        <form class="form-horizontal" ng-repeat="(name, vals) in outputs">
            <fieldset>
                <legend>{{ name }}</legend>
                <div ng-if="name=='Transformed Sample'">
                    <div sample-view doc="vals" ng-disabled="true"></div>
                </div>
                <div ng-if="name!=='Pick Sample'">
                    <div ng-repeat="value in vals.model.default">
                        <cgroup ng-if="value.value !== ''" label="{{value.name}}">
                            <input class="input-xlarge" ng-model="value.value" type="text" ng-disabled="true">
                        </cgroup>
                    </div>
                    <div ng-repeat="value in vals.model.added_properties">
                        <cgroup ng-if="value.value !== ''" label="{{value.name}}">
                            <input class="input-xlarge" ng-model="value.value" type="text" ng-disabled="true">
                        </cgroup>
                    </div>
                </div>
            </fieldset>
        </form>
        <form ng-if="output_files.length != 0" class="form-horizontal">
            <fieldset>
                <legend>Output Files</legend>
                <cgroup ng-repeat="file in output_files" label="File:">
                    <input class="input-xlarge" ng-model="file.name" type="text" ng-disabled="true">
                </cgroup>
            </fieldset>
        </form>
    </div>
    <div class="row-fluid">
        <button ng-click="saveDraft()" class="btn btn-primary">Save Draft</button>
        <button ng-click="submitProvenance()" class="btn btn-success">Submit</button>
        <button ng-click="deleteDraft()" class="btn btn-danger">Delete</button>
    </div>
</div>
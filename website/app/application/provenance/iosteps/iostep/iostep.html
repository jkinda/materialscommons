<div ng-controller="provenanceIOStepsIOStep">
    <div class="row-fluid">
        <div class="span10">
            <div class="well">
                <div ng-if="doc.template_pick==='sample'">
                    <form class="form-horizontal">
                        <fieldset>
                            <cgroup label="Pick Sample:">
                                <select ng-model="doc.model.sample"
                                        ng-options="samp.model.default[0].value for samp in samples_list | samplefilter:process"
                                        >
                                </select>
                            </cgroup>
                            <label>Sample: {{ doc.model.sample.model.default[0].value}}</label>

                            <cgroup label="Notes:">
                                <textarea ng-model="doc.model.default[1].value" class="span8" rows="4"
                                          placeholder="Notes..."></textarea>
                            </cgroup>
                            <fieldset>
                                <legend>Added Properties</legend>
                                <div ng-repeat="pv in doc.model.added_properties">
                                    <div class="control-group">
                                        <label class="control-label">{{pv.name}}</label>

                                        <div class="controls">
                                            <div ng-if="pv.value_choice.length!=0">
                                                <select ng-model="pv.value">
                                                    <option ng-repeat="val in pv.value_choice"> {{val}}
                                                    </option>
                                                </select>
                                            </div>
                                            <div ng-if="pv.value_choice.length==0">
                                                <input type="text" ng-model="pv.value">
                                            </div>
                                            <div ng-if="pv.unit_choice.length!=0">
                                                <select class="span2" ng-model="pv.unit">
                                                    <option ng-repeat="unit in pv.unit_choice"> {{unit}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Additional Properties:</label>
                                    <div class="controls">
                                        <select ng-model="model.additionalProperty"
                                                ng-options="property.name for property in doc.model.additional">
                                        </select>
                                        <button ng-click="addAdditionalProperty()" class="btn btn-info">Add</button>
                                    </div>
                                </div>
                            </fieldset>

                        </fieldset>

                    </form>
                </div>


                <form ng-hide="doc.template_pick=='sample'" class="form-inline">
                    <fieldset>
                        <legend>Default Properties</legend>
                        <div df-properties default-properties="doc.model.default"></div>
                        <hr align="left">
                    </fieldset>
                    <fieldset>
                        <legend>Added Properties</legend>
                        <div ng-repeat="pv in doc.model.added_properties">
                            <div class="control-group">
                                <label class="control-label">{{pv.name}}</label>

                                <div class="controls">
                                    <div ng-if="pv.value_choice.length!=0">
                                        <select ng-model="pv.value">
                                            <option ng-repeat="val in pv.value_choice"> {{val}}
                                            </option>
                                        </select>
                                    </div>
                                    <div ng-if="pv.value_choice.length==0">
                                        <input type="text" ng-model="pv.value">
                                    </div>
                                    <div ng-if="pv.unit_choice.length!=0">
                                        <select class="span2" ng-model="pv.unit">
                                            <option ng-repeat="unit in pv.unit_choice"> {{unit}}
                                            </option>
                                        </select>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div ng-show="doc.model.additional.length > 0" class="control-group">
                            <label class="control-label">Additional Properties:</label>

                            <div class="controls">
                                <select ng-model="model.additionalProperty"
                                        ng-options="property.name for property in doc.model.additional">
                                </select>
                                <button ng-click="addAdditionalProperty()" class="btn btn-info">Add</button>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Custom Properties:</label>

                            <div class="controls">
                                <input ng-model="customPropertyName" placeholder="Name..." type="text">
                                <input ng-model="customPropertyValue" placeholder="Value..." type="text">
                                <button ng-click="addCustomProperty()" class="btn btn-info">Add</button>
                            </div>
                        </div>
                    </fieldset>
                </form>

            </div>
        </div>
    </div>
</div>
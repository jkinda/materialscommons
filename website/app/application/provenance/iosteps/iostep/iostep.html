<div ng-controller="provenanceIOStepsIOStep">
    <div class="row-fluid">
        <div class="span10">
            <div class="well">
                <div ng-if="doc.template_pick==='material'">
                    <form class="form-horizontal">
                        <fieldset>
                            <h5>From what material was your sample drawn?</h5>
                            <cgroup label="Material:">
                                <select ng-model="doc.material"
                                        ng-options="mat.name for mat in materials"
                                        ng-change="filter_samples()">
                                </select>
                            </cgroup>
                        </fieldset>
                        <label>Material: {{ doc.material.name }}</label>
                    </form>
                </div>
                <div ng-show="doc.material">
                    <form class="form-horizontal">
                        <fieldset>
                            <cgroup label="Sample:">
                                <select ng-model="doc.sample"
                                        ng-options="samp.model.default[0].value for samp in samples_list | samplefilter:doc"
                                        ng-change="update_sample()">
                                </select>
                            </cgroup>
                        </fieldset>
                        <label>Sample: {{ doc.sample.model.default[0].value }}</label>
                    </form>
                </div>
                <form class="form-horizontal">
                    <fieldset>
                        <legend>Default Properties</legend>
                        <div df-properties default-properties="doc.model.default"></div>
                    </fieldset>
                </form>
                <hr align="left">

                <form class="form-inline">
                    <fieldset>
                        <legend>Additional Properties</legend>
                        <div ng-repeat="pv in doc.model.added_properties">
                            <div class="control-group">
                                <label class="control-label">{{pv.name}}</label>
                                <div class="controls">
                                    <input type="text" ng-model="pv.value">
                                    <span ng-if="pv.unit.length!=0">
                                        <input style="width:60px" type="text" ng-model="pv.unit">
                                    </span>
                                </div>
                            </div>
                        </div>

                    </fieldset>
                </form>

            </div>
        </div>
    </div>
</div>
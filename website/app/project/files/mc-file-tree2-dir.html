<div>
    <ol ui-tree-nodes ng-model="ctrl.files">
        <li ng-repeat="file in ctrl.files track by file.data.id | orderBy:'data.name'" ui-tree-node>
            <div ui-tree-handle ng-class="{'angular-ui-tree-handle-active': file.active}">
                <div ng-if="file.data._type === 'directory'">
                    <div layout="row" layout-align="start center">
                        <i class="fa fa-fw fa-reorder drag-handle-color"></i>
                        <a ng-click="ctrl.setActive(this, file)" data-nodrag>
                            <span ng-if="file.expand"><i
                                    class="fa fa-fw fa-folder-open file-tree-icon-color"></i></span>
                                <span ng-if="!file.expand"><i
                                        class="fa fa-fw fa-folder file-tree-icon-color"></i></span>
                            {{file.data.name}}
                        </a>
                    </div>
                    <div ng-if="file.active">
                        <div layout="row" layout-align="space-around center" data-nodrag>
                            <a class="mc-file-tree-control text-uppercase" ng-click="file.promptForDir = true">
                                <i class="fa fa-fw fa-plus-square"></i> sub folder
                            </a>
                            <a class="mc-file-tree-control text-uppercase">
                                <i class="fa fa-fw fa-upload"></i>upload files
                            </a>
                            <a class="mc-file-tree-control text-uppercase">
                                <i class="fa fa-fw fa-pencil-square"></i>rename
                            </a>
                        </div>
                        <div ng-if="file.promptForDir" layout="row" data-nodrag>
                            <md-input-container>
                                <input on-enter="ctrl.addFolder(file)" ng-model="ctrl.folderName">
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div ng-if="file.data._type === 'file'">
                    <div ng-if="file.data.name !== ctrl.placeholderName">
                        <i class="fa fa-fw fa-reorder drag-handle-color"></i>
                        <a ng-click="ctrl.setActive(this, file)" data-nodrag>
                            <span><i class="fa fa-fw fa-file file-tree-icon-color"></i></span>
                            {{file.data.name}}
                        </a>
                    </div>
                    <!-- placeholder for empty directory so we can add items to it -->
                    <div ng-if="file.data.name === ctrl.placeholderName">
                    </div>
                </div>
            </div>
            <div ng-if="file.data._type === 'directory'">
                <mc-file-tree2-dir ng-if="file.expand" file="file"></mc-file-tree2-dir>
            </div>
        </li>
    </ol>
</div>
<div layout="row" layout-xs="column" layout-wrap layout-margin>
    <div ng-if="false" flex="90">
        <md-button class="md-raised" ng-click="$mdOpenMenu($event)">
            <md-icon md-font-icon="fa-plus" class="fa fa-md-icon"></md-icon>
            Quick Add
        </md-button>
    </div>

    <div flex="100">
        <div layout="row" layout-sm="column" layout-wrap layout-align="space-between center">
            <div flex="25">
                <md-card class="process-color-bg text-white">
                    <md-card-title layout="column">
                        <md-card-title-text layout-align="center center">
                            <a class="md-headline text-white" ui-sref="project.processes">
                                {{$ctrl.project.processes.length | number}} Processes
                                <i class="fa fa-code-fork"></i>
                            </a>
                        </md-card-title-text>
                        <md-card-actions layout="row" layout-align="end center">
                            <md-menu-bar>
                                <md-menu>
                                    <md-button ng-click="$mdOpenMenu($event)">
                                        New Process
                                    </md-button>
                                    <md-menu-content>
                                        <md-menu-item>
                                            <md-menu>
                                                <md-button ng-click="$mdOpenMenu()">
                                                    <span class="text-uppercase">favorites</span>
                                                </md-button>
                                                <md-menu-content>
                                                    <md-menu-item
                                                            ng-repeat="template in $ctrl.templates | filter:{favorite: true} | orderBy:'name'">
                                                        <a ui-sref="project.processes.create({template_id: template.name, process_id:''})">
                                                            {{template.name}} <span ng-if="template.prefill">(PF)</span>
                                                        </a>
                                                    </md-menu-item>
                                                    <md-menu-item ng-if="!$ctrl.hasFavorites()">No favorites
                                                    </md-menu-item>
                                                </md-menu-content>
                                            </md-menu>
                                        </md-menu-item>
                                        <md-menu-item>
                                            <md-button ng-click="$ctrl.chooseTemplate()">
                                                <span class="text-uppercase">Choose Template</span>
                                            </md-button>
                                        </md-menu-item>
                                        <md-menu-item>
                                            <md-button ng-click="$ctrl.chooseExistingProcess()">
                                                <span class="text-uppercase">Choose from existing process</span>
                                            </md-button>
                                        </md-menu-item>
                                    </md-menu-content>
                                </md-menu>
                            </md-menu-bar>
                        </md-card-actions>
                    </md-card-title>
                </md-card>
            </div>
            <div flex="25">
                <md-card class="sample-color-bg text-white">
                    <md-card-title layout="column">
                        <md-card-title-text layout-align="center center">
                            <a class="md-headline text-white" ui-sref="project.samples">
                                {{$ctrl.project.samples.length | number}} Samples
                                <i class="fa fa-cubes"></i>
                            </a>
                        </md-card-title-text>
                        <md-card-actions layout="row" layout-align="end center">
                            <md-button>New Sample</md-button>
                        </md-card-actions>
                    </md-card-title>
                </md-card>
            </div>
            <div flex="25">
                <md-card class="file-color-bg text-white">
                    <md-card-title layout="column">
                        <md-card-title-text layout-align="center center">
                            <a class="md-headline text-white" ui-sref="project.files">
                                {{$ctrl.project.file_count | number}} Files
                                <i class="fa fa-files-o"></i>
                            </a>
                        </md-card-title-text>
                        <md-card-actions layout="row" layout-align="end center">
                            <md-button>Upload Files</md-button>
                        </md-card-actions>
                    </md-card-title>
                </md-card>
            </div>
            <div flex="25">
                <md-card class="review-color-bg text-white">
                    <md-card-title layout="column">
                        <md-card-title-text layout-align="center center">
                            <span class="md-headline">
                                {{$ctrl.project.reviews.length | number}} Reviews
                                <i class="fa fa-comment"></i>
                            </span>
                        </md-card-title-text>
                        <md-card-actions layout="row" layout-align="end center">
                            <md-button>New Review</md-button>
                        </md-card-actions>
                    </md-card-title>
                </md-card>
            </div>
        </div>
    </div>
    <div layout="row" layout-align="space-around start">
        <div flex layout-align="start start">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Samples</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="sample in $ctrl.project.samples | filter:{is_grouped: false}">
                    <td>
                        <b><a ui-sref="project.samples({sample_id: sample.id})">{{sample.name}}</a></b>

                        <div style="padding-bottom: 15px;">
                            <p style="font-size: 12px;padding-bottom: 10px;">
                                {{sample.birthtime | toDateString}}
                                <span style="padding-left: 10px">{{sample.owner}}</span>
                                <span ng-if="sample.has_group" style="padding-left: 10px">
                                    Group size: {{sample.group_size}}
                                </span>
                            </p>

                            <display-image-tab sample="sample"></display-image-tab>
                        </div>
                    </td>
                    <td>
                        <div style="max-height: 200px;overflow-y: auto;">{{sample.description}}</div>
                    </td>
                </tr>
                </tbody>
            </table>
            <div ng-if="$ctrl.project.samples.length === 0">
                -- No Samples --
            </div>
        </div>
        <div flex="5"></div>
        <div flex>
            <div ng-if="$ctrl.projectLoaded" home-calendar project="$ctrl.project"></div>
        </div>
    </div>
</div>
<div class="row-fluid">
    <div class="span6 offset1">
        <select ng-model="view_type"
                ui-select2="{placeholder: 'View', allowClear: true, width:'element'}"
                ng-multiple="false">
            <option></option>
            <option value="prov">Provenance View</option>
            <option value="thumbnail">Thumbnail View</option>
        </select>

        <select ng-model="add_to"
                ui-select2="{placeholder: 'Add To', allowClear: true, width:'element'}"
                ng-multiple="false">
            <option></option>
            <option value="prov">Provenance</option>
            <option value="to_dataset">To Dataset</option>
            <option value="to_project">To Project</option>

        </select>

    </div>
    <div class="span4">
        <!--<button type="button" class="label-info">Download</button>-->
        <!--<button type="button" class="label-info">Upload</button>-->
    </div>

</div>

<div ng-show="add_to=='prov'">
<br>

<div class="row-fluid">
<div class="span12 offset1">
<div class="span2">

</div>
<div class="span10">
<div class="row-fluid">
    <div class="span10">
        <div class="well">
            <div ng-show="choose==process">
                <b><u>Instructions</u></b><br>
                Where did your data come from?
                <li>Choose a Process Type, Inputs and Outputs to describe your data's provenance.</li>
                <li>Start by choosing the Process Type used to generate the data, because the Process Type will decide
                    what
                    Inputs and Outputs are required.
                </li>


            </div>

        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span2">
        <div class="well">
            <ul class="nav nav-list">
                <li class="nav-header"><i class="icon-wrench"></i>Steps</li>
                <li ng-class="{'active':isCurrentStep('nav_choose_process')}"><a
                        ng-click="setCurrentStep('nav_choose_process')">Process</a>
                </li>
                <li ng-class="{'active' : isCurrentStep('nav_choose_inputs')}"><a
                        ng-click="setCurrentStep('nav_choose_inputs')">Inputs </a>
                </li>
                <li ng-class="{'active' : isCurrentStep('nav_choose_outputs')}"><a
                        ng-click="setCurrentStep('nav_choose_outputs')">Outputs </a>
                </li>
            </ul>
        </div>
    </div>
    <div ui-view>

    </div>
    <div class="block" ng-show="isCurrentStep('nav_choose_process')"
         ng-controller="ProcessStepController" ng-init="init()">
        <form id="process-tab" class="form-inline span8">
            <div class="well">
                <h4>Process Information</h4>
                <label>Type :</label> <select ng-model="process_type">
                <option>Select Process Type:</option>
                <option ng-repeat="p in process_templates" value="{{p}}"
                        ng-click="selected_template_type(p.id)">
                    {{p.template_name}}
                </option>
            </select>

                <div ng-show="process_type">
                    <label> Name:</label> <select ng-model="selected_process">
                    <option value="new"> New Process</option>
                    <option disabled>----------</option>
                    <option ng-repeat="pr in processes" value="{{pr}}">{{pr.name}}</option>

                </select>

                    <div ng-show="selected_process">
                        <hr/>

                                        <span ng-show="selected_process=='new'">
                                            <label>Name:</label> <input ng-model="process.name" type="text">
                                        </span><br>
                        <label>Description:</label> <input ng-model="process.description"
                                                           type="text"><br></br>
                        <label>Machine:</label>
                        <select ng-model="m">
                            <option>Select Machine:</option>
                            <option ng-repeat="m in process.machine">{{m}}</option>
                        </select>
                        <label>Selected Machine:</label> {{m}}<br>
                        <label>Notes:</label><br><textarea class="input-xxlarge" ng-model="new_note"/><br>
                        <button ng-click="add_notes()">Add Notes</button>
                        <a style="cursor:pointer" ng-click="customnote=!customnote">previous notes</a> <br>
                                        <span ng-hide="customnote">
                                            <br><b>Notes</b>
                                             <li ng-repeat="note in process.notes">
                                                 {{note}}
                                             </li>

                                        </span>
                        <span ng-show="customnote"></span>

                        <div class="well">
                            <label> Runs:</label> <br>
                            <label>Start: </label><input class="span3" ng-model="start_run" type="text"><br>
                            <label> stop: </label><input class="span3" ng-model="stop_run" type="text"><br>
                            <label>Error Msg:</label><textarea class="input-large"
                                                               ng-model="new_err_msg"/><br>
                            <button ng-click="add_error_msg()">Add Run</button>

                            <a style="cursor:pointer" ng-click="customruns=!customruns">previous runs</a>
                            <br>
                                            <span ng-hide="customruns">
                                                <br><b>Runs</b>
                                                <li ng-repeat="run in process.runs">
                                                    Started: {{run.started}}<br>
                                                    Ended: {{run.stopped}}<br>
                                                    Error messages: {{run.error_messages}}<br>
                                                </li>

                                            </span>
                            <span ng-show="customruns"></span>
                        </div>

                        <br>
                        <label>Citations:</label><br><textarea class="input-xxlarge"
                                                               ng-model="new_citation"/><br>
                        <button ng-click="add_citations()">Add Citations</button>
                        <a style="cursor:pointer" ng-click="customcitations=!customcitations">previous citations</a>
                        <br>
                                        <span ng-hide="customcitations">
                                            <br><b>Citations</b>
                                             <li ng-repeat="cit in process.citations">
                                                 {{cit}}
                                             </li>

                                        </span>
                        <span ng-show="customcitations"></span>
                        <br>

                        <div ng-hide="is_saved==true">
                            <button class="label label-info" ng-click="save_process()"> Save Process
                            </button>
                        </div>
                        <div ng-show="is_saved==true">
                            <button class="label label-info" ng-click="next_step()"> Next Step
                            </button>
                        </div>

                    </div>

                </div>
            </div>
        </form>
    </div>


    <div class="block" ng-show="isCurrentStep('nav_choose_inputs')">
        <form id="input-tab" class="form-inline span8">
            <div class="well" >
                <div ng-repeat="condition in state.attributes.process.required_conditions">
                    <div class="well"  ng-controller="InputStepController" ng-init="init(condition)">

                        <a style="cursor:pointer" ng-click="showDetails=!showDetails">{{condition_name}}</a>

                        <p style="float: right" ng-show="state.attributes.input_conditions[condition_name]">
                            <button class="btn btn-success">Saved</button>
                        </p>
                        <br>
                                        <span ng-show="showDetails">
                                               <label>Use Existing: </label>
                                            <select ng-model="use_condition">
                                                <option>Pick Condition:</option>
                                                <option ng-repeat="ec in existing_conditions" value="{{ec}}"
                                                        ng-click="selected_condition(ec)">
                                                    {{ec.name}}
                                                </option>
                                            </select> <br> <br>
                                        <div ng-show="use_condition">
                                            <label>Name:</label> {{selected_cond.name}}<br>
                                        </div>
                                        <div ng-hide="use_condition">

                                            OR Fill out for new<br><br>

                                            <label>Name:</label> {{condition.template_name}}<br>
                                            <label>Description</label> {{condition.template_description}}
                                        </div>

                                        <div ng-repeat="property in condition.model">
                                            <label>{{property.name}}</label><input ng-model=property.value type="text">
                                        </div>
                                            <button ng-click="save_condition()">Save</button>
                                        </span>

                    </div>
                </div>
                <div class="well" ng-controller="InputStepController">
                    <a style="cursor:pointer" ng-click="showDetails=!showDetails">Input files</a><br>
                                <span ng-show="showDetails">
                                        <b>Select the files from project tree shown below</b><br>
                                        <button ng-click="save_selected_input_files()">Add Files</button>
                                </span>

                    <div ng-show="added">
                        <li ng-repeat="item in checked_items">
                            <i class="fa fa-check-square"></i>{{item}}
                        </li>
                        <button class="label label-info" ng-click="next_step()">Next Step</button>

                    </div>

                </div>

            </div>
        </form>

    </div>

    <div class="block" ng-show="isCurrentStep('nav_choose_outputs')">
        <form id="output-tab" class="form-inline span8">
            <div class="well">
                  <h4>Test</h4>
                <div ng-repeat="cond in state.attributes.process.required_output_conditions">
                    <div class="well"   ng-controller="OutputStepController" ng-init="init(cond)">
                        <a style="cursor:pointer" ng-click="showDetails=!showDetails">{{condition_name}}</a>
                        <p style="float: right" ng-show="state.attributes.output_conditions[condition_name]">
                            <button class="btn btn-success">Saved</button>
                        </p>
                        <br>
                                        <span ng-show="showDetails">
                                               <label>Use Existing: </label>
                                            <select ng-model="use_condition">
                                                <option>Pick Condition:</option>
                                                <option ng-repeat="ec in existing_conditions" value="{{ec}}"
                                                        ng-click="selected_condition(ec)">
                                                    {{ec.name}}
                                                </option>
                                            </select> <br> <br>
                                        <div ng-show="use_condition">
                                            <label>Name:</label> {{selected_cond.name}}<br>
                                        </div>
                                        <div ng-hide="use_condition">

                                            OR Fill out for new<br><br>

                                            <label>Name:</label> {{condition.template_name}}<br>
                                            <label>Description</label> {{condition.template_description}}
                                        </div>

                                        <div ng-repeat="property in condition.model">
                                            <label>{{property.name}}</label><input ng-model=property.value type="text">
                                        </div>
                                            <button ng-click="save_condition()">Save</button>
                                        </span>
                    </div>
                    <div class="well" ng-controller="OutputStepController">
                        <a style="cursor:pointer" ng-click="showDetails=!showDetails">Output files</a><br>
                                <span ng-show="showDetails">
                                        <b>Select the files from project tree shown below</b><br>
                                        <button ng-click="save_selected_output_files()">Add Files</button>
                                </span>

                        <div ng-show="added">
                            <li ng-repeat="item in checked_items">
                                <i class="fa fa-check-square"></i>{{item}}
                            </li>
                            <button class="label label-info" ng-click="upload()">Upload</button>

                        </div>

                    </div>


                </div>
                </div>
        </form>
    </div>

</div>


</div>


</div>

</div>
</div>
<br></br>

<div>
    <div class="row-fluid">
        <div class="span8 offset1">
            <table treetable treedata="tree_data">
                <a style="cursor:pointer" ng-click="clearAll()" class="pull-left"> UnCheckAll</a>
                <thead>
                <tr>
                    <th></th>
                    <th>Project</th>
                    <th>Type</th>
                    <th>c_id</th>
                    <th>p_id</th>
                </tr>
                </thead>
                <tbody>

                <tr ng-repeat="t in tree_data" data-tt-id={{t.c_id}} data-tt-parent-id={{t.parent_id}}>
                    <!--<span type="checkbox" style="margin-bottom: 7px;"    ng-click="check(data.id)" class="treecheckBox">"-->
                    <!--<td><input type="checkbox" ng-class="isChecked(t.id)" ng-click="check(t.id)"></td>-->
                    <td><span type="checkbox" style="margin-bottom: 7px;"   ng-click="check(t.id)" class="treecheckBox">
                        <img src="checkmark.png"  ng-show="isChecked(t.id)"  class="checkBox-icon">
                    </span>
                    </td>
                    <td>{{t.name}}</td>
                    <td>{{t.type}}</td>
                    <td>{{t.c_id}}</td>
                    <td>{{t.parent_id}}</td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

</div>
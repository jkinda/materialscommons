<div style="overflow: auto; max-height: 80vh" ng-if="$ctrl.showStepMaximized()" layout-margin>
    <md-content layout="column" flex="95">
        <mc-experiment-task-details step="$ctrl.getCurrentStep()" editor-options="$ctrl.editorOptionsMaximized">
        </mc-experiment-task-details>
    </md-content>
</div>
<div ng-if="!$ctrl.showStepMaximized()" layout="column" layout-align="start stretch" flex layout-margin
     style="overflow: hidden">
    <div layout="row" flex layout-align="start stretch">
        <!--<md-sidenav flex="30" md-is-locked-open="$ctrl.showSidebar"-->
        <!--style="max-height: 82vh; min-height: 82vh; margin-right: 8px">-->
        <!--<span style="text-align: center" class="md-subhead">Details</span>-->
        <!--<md-content layout="column" layout-fill>-->
        <!--<mc-experiment-step-details step="$ctrl.getCurrentStep()" editor-options="$ctrl.editorOptions">-->
        <!--</mc-experiment-step-details>-->
        <!--</md-content>-->
        <!--</md-sidenav>-->

        <div layout="column" flex md-whiteframe>
            <md-toolbar>
                <div layout="row" layout-align="start center" layout-padding>
                    <div flex="50" layout="row" layout="space-between center">
                        <md-menu-bar>
                            <md-menu>
                                <button ng-click="$mdOpenMenu()" class="md-button">Organize</button>
                                <md-menu-content width="3">
                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.moveLeft()">
                                        <span class="text-uppercase"><i
                                                class="fa fa-fw fa-arrow-left"></i>Move Left</span>
                                        </md-button>
                                    </md-menu-item>

                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.moveRight()">
                                        <span class="text-uppercase"><i
                                                class="fa fa-fw fa-arrow-right"></i>Move Right</span>
                                        </md-button>
                                    </md-menu-item>

                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.moveUp()">
                                            <span class="text-uppercase"><i
                                                    class="fa fa-fw fa-arrow-up"></i>Move Up</span>
                                        </md-button>
                                    </md-menu-item>

                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.moveDown()">
                                        <span class="text-uppercase"><i
                                                class="fa fa-fw fa-arrow-down"></i>Move Down</span>
                                        </md-button>
                                    </md-menu-item>
                                </md-menu-content>
                            </md-menu>
                            <md-menu>
                                <button class="md-button" ng-click="$mdOpenMenu()">View</button>
                                <md-menu-content width="3">
                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.expandAll()">
                                            <span class="text-uppercase">Expand all</span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.collapseAll()">
                                            <span class="text-uppercase">Collapse all</span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-divider></md-menu-divider>
                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.openAll()">
                                            <span class="text-uppercase">Open All</span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                        <md-button ng-click="$ctrl.closeAll()">
                                            <span class="text-uppercase">Close All</span>
                                        </md-button>
                                    </md-menu-item>
                                </md-menu-content>
                            </md-menu>
                        </md-menu-bar>
                        <div>
                            <md-button class="md-primary text-white" ng-click="$ctrl.showSidebar = !$ctrl.showSidebar">
                                <span class="text-white" ng-if="$ctrl.showSidebar">Hide Sidebar</span>
                                <span class="text-white" ng-if="!$ctrl.showSidebar">Show Sidebar</span>
                            </md-button>
                        </div>
                    </div>
                    <md-divider class="md-vertical-divider"></md-divider>
                    <div layout="column" flex>
                        <mc-editable-header header="$ctrl.experiment.name"
                                            on-change="$ctrl.updateName(what)"
                                            input-classes="mc-input-as-line">
                        </mc-editable-header>
                        <mc-editable-header header-classes="md-subhead text-black"
                                            on-change="$ctrl.updateDescription(what)"
                                            input-classes="font-16 mc-input-line text-black"
                                            header="$ctrl.experiment.description">
                        </mc-editable-header>
                    </div>
                </div>
            </md-toolbar>

            <div flex>
                <mc-experiment-tasks-list current-step="$ctrl.currentStep"
                                          current-node="$ctrl.currentNode"
                                          experiment="$ctrl.experiment">
                </mc-experiment-tasks-list>
            </div>
        </div>
        <md-sidenav md-is-locked-open="true" layout="column" class="experiment-tools-sidenav">
            <md-content stylex="background-color: #e9e9e9;">
                <div layout="column" layout-align="center center" class="experiment-tool">
                    <i class="fa fa-fw fa-info-circle fa-2x"></i>
                    <span>Details</span>
                </div>

                <div layout="column" layout-align="center center" class="experiment-tool active">
                    <i class="fa fa-fw fa-tasks fa-2x"></i>
                    <span>Tasks</span>
                </div>

                <div layout="column" layout-align="center center" class="experiment-tool">
                    <i class="fa fa-fw fa-calendar fa-2x"></i>
                    <span>Forecast</span>
                </div>

                <div layout="column" layout-align="center center" class="experiment-tool">
                    <i class="fa fa-fw fa-flag-o fa-2x"></i>
                    <span>Flagged</span>
                </div>

                <div layout="column" layout-align="center center" class="experiment-tool">
                    <i class="fa fa-fw fa-cubes fa-2x"></i>
                    <span>Samples</span>
                </div>

                <div layout="column" layout-align="center center" class="experiment-tool experiment-tool-border-bottom">
                    <i class="fa fa-fw fa-files-o fa-2x"></i>
                    <span>Files</span>
                </div>
            </md-content>
        </md-sidenav>
    </div>
</div>
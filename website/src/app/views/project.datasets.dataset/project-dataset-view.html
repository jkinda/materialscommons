<md-content layout="column" flex style="width:80vw">
    <div layout="column" layout-fill layout-align="start stretch" layout-margin style="padding-right: 15px">
        <h3>
            <div layout="row" layout-align="space-between center">
                Dataset: {{$ctrl.state.dataset.title}}
                <a class="md-subhead" ng-click="$ctrl.showJson()">show json</a>
            </div>
        </h3>
        <md-tabs md-stretch-tabs md-border-bottom md-dynamic-height>
            <md-tab md-on-select="$ctrl.detailsSelected()">
                <md-tab-label>Details</md-tab-label>
                <md-tab-body>
                    <mc-dataset-details2 dataset="$ctrl.state.dataset"
                                         on-update-dataset="$ctrl.handleUpdateDataset(dataset)"
                                         on-publish-dataset="$ctrl.handlePublishDataset()"
                                         on-unpublish-dataset="$ctrl.handleUnpublishDataset()"
                                         on-add-paper="$ctrl.handleAddPaper(paper)"
                                         on-add-author="$ctrl.handleAddAuthor(author)"
                                         on-cancel="$ctrl.handleCancel()"
                                         on-add-doi="$ctrl.handleAddDOI(doiDetails)">
                    </mc-dataset-details2>
                </md-tab-body>
            </md-tab>
            <md-tab md-on-select="$ctrl.samplesSelected()">
                <md-tab-label>
                    Samples
                </md-tab-label>
                <md-tab-body>
                    <mc-workflow-as-table-editor ng-if="$ctrl.state.dataset.samplesLoaded"
                                                 samples="$ctrl.state.dataset.samples"
                                                 processes="$ctrl.state.dataset.processes" layout-fill></mc-workflow-as-table-editor>
                </md-tab-body>
            </md-tab>
            <md-tab md-on-select="$ctrl.filesSelected()">
                <md-tab-label>Files</md-tab-label>
                <md-tab-body>
                    <mc-dataset-files ng-if="$ctrl.state.dataset.filesLoaded"
                                      files="$ctrl.state.dataset.files"
                                      project="$ctrl.state.project"
                                      selection="$ctrl.state.dataset.file_selection"
                                      on-remove-files="$ctrl.handleDeleteFiles(filesToDelete)"
                                      on-add-files="$ctrl.handleAddFiles(filesToAdd)">
                    </mc-dataset-files>
                </md-tab-body>
            </md-tab>
        </md-tabs>
    </div>
</md-content>